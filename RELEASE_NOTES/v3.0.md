# cpu_throttle v3.0

This release prepares cpu_throttle for production usage with improved installer behavior, safer upgrades, and better companion binary support.

## Highlights

- Installer now prefers prebuilt release binaries from GitHub Releases and will only build from source if requested or required.
- New installer flags: `--force-build`, `--force-binaries`, `--install-tui`, `--release-tag`, and `-y/--yes` for non-interactive installs.
- Companion binaries (`cpu_throttle_ctl`, `cpu_throttle_tui`) are detected in release assets and installed automatically when available.
- Safe service replacement: existing systemd service files are backed up and the service is stopped before replacing the binary to avoid "Text file busy" issues.
 - Built-in Web UI and REST API: an embedded dashboard and JSON HTTP API provide programmatic status and control. The web interface listens on a configurable port (default: 8086) and exposes endpoints such as `/api/v1/status`, `/api/v1/control`, and `/api/v1/profiles` for integration and automation.

## Improvements

- Multi-distro installer enhancements (Debian/Ubuntu, Fedora/RHEL, Arch, openSUSE, Alpine).
- Release detection via GitHub API with an HTML fallback for robustness.
- Installer detects ELF vs archive payloads and will install a direct ELF binary when provided.
- TUI support: installer can build the TUI from source (`--tui`) or install a prebuilt TUI companion (`--install-tui`) when available.
 - Web UI & REST API: the new release ships an embedded web dashboard and REST API for remote monitoring and control. The installer can optionally enable the web UI and open the firewall for the configured port during installation.

## Bug fixes

- Fixed installer logic that sometimes attempted to build even when prebuilt binaries were selected.
- Fixed ordering so the welcome banner is shown before any remote queries or package-manager detection.

## Release assets (recommended)
- `cpu_throttle` — main daemon binary (ELF)
- `cpu_throttle_ctl` — control utility (ELF)
- `cpu_throttle_tui` — optional TUI (ELF)
- `install_cpu-throttle.sh` — updated installer
- `burn2cool-v3.0.tar.gz` — source tarball (optional)

## Quick install examples

# Install prebuilt binary directly
```bash
wget https://github.com/DiabloPower/burn2cool/releases/download/v3.0/cpu_throttle
chmod +x cpu_throttle
sudo ./cpu_throttle
```

# Run the installer directly from the repo (pipe-safe)
```bash
bash -c "$(curl -fsSL https://raw.githubusercontent.com/DiabloPower/burn2cool/main/install_cpu-throttle.sh)"
```

# Install and also install the prebuilt TUI (if present)
```bash
bash -c "$(curl -fsSL https://raw.githubusercontent.com/DiabloPower/burn2cool/main/install_cpu-throttle.sh)" -- --install-tui
```
