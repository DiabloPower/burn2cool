*, *:before, *:after { box-sizing: border-box; }
body{ font-family: sans-serif; margin: 12px; }
header h1{ margin:0 0 12px 0 }
main{ display:flex; gap:20px }
#profiles, #status{ flex:1 }
#list{ max-height:400px; overflow:auto; border:1px solid #ccc; padding:6px }
.profile{ padding:6px; margin-bottom:6px; border-bottom:1px dashed #eee }
.profile .preview{ color:#333; font-size:0.9em }
textarea{ width:100%; max-width:100%; box-sizing:border-box; resize:vertical }
input, textarea, button{ font-size:0.95em }
button{ min-width:140px; width:140px; padding:8px 12px; }
pre{ background:#f6f6f6; padding:8px; border:1px solid #ddd }
@media (max-width:700px) {
  body{ margin:8px; padding:12px }
  .card{ padding:12px }
  input, textarea, button { width:100%; box-sizing:border-box; margin:6px 0 }
}

/* Make the skins modal header responsive on mobile: stack actions vertically */
@media (max-width:700px) {
  .modal-row-actions { flex-direction:column; align-items:stretch; gap:8px; }
  .header-left { width:100%; justify-content:flex-start; }
  .install-group { width:100%; justify-content:flex-start; }
  .header-right { display:flex; justify-content:flex-end; gap:8px; }
  .header-right > button { min-width:44px; box-sizing:border-box; }
}

/* At <=950px move input buttons to their own row within the Settings card to avoid overflow */
@media (max-width:950px) {
  /* Make setting rows stack vertically so the action button moves below the input */
  .setting-row{flex-direction:column;align-items:stretch}
  .setting-row input, .setting-row select{width:100%}
  .setting-row button{width:100%;margin-top:6px}
  /* Prevent button text from wrapping and making the button taller than other buttons */
  .setting-row button{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  /* Keep buttons in setting rows (except restart/avg) the same height as inputs to avoid excessive height on narrow viewports */
  .setting-row:not(.restart):not(.avg-row) button { height: 40px; min-height: 40px; max-height: 40px; }
  /* For small screens revert excluded input to normal wrapping/scrolling */
  .setting-row.excluded input{ white-space:normal; overflow:visible; text-overflow:clip; }
  /* Prevent the label from forcing wide width if present */
  .setting-row label{min-width:0;margin-bottom:6px}
}

/* Profiles select styling */
.profiles-select {
  margin-left:8px;
  min-width:170px;
  padding:8px 10px;
  border-radius:6px;
  background: #333;
  color: #fff;
  border: 1px solid #555;
  font-size: 0.95em;
  line-height: 1.2;
  -webkit-appearance: none; /* remove native arrow on some browsers */
  appearance: none;
  box-shadow: none;
}


/* Make the select fit nicely on small screens */
@media (max-width:700px) {
  .profiles-select { width:100%; margin-left:0; }
}

/* At <=666px, stack the profiles row to prevent the select from overflowing */
@media (max-width:666px) {
  .profiles-row{flex-direction:column;align-items:stretch}
  .profiles-row label{min-width:0;margin-bottom:6px}
  .profiles-select{width:100%;margin-left:0}
}

/* Layout helper for label + select on one line */
.profiles-row { display:flex; align-items:center; gap:12px; }

/* Decorative arrow using inline SVG as background (keeps file small) */
.profiles-select {
  /* add small arrow icon (white) */
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24'><path fill='%23ffffff' d='M7 10l5 5 5-5z'/></svg>");
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 12px 12px;
  padding-right: 36px; /* room for arrow */
}

/* Focus / accessibility */
.profiles-select:focus {
  outline: none;
  border-color: #FF8C00;
  box-shadow: 0 0 0 3px rgba(255,140,0,0.12);
}

/* Make select visually match input height */
.profiles-select, input, textarea { height: 40px; }
.profiles-select { line-height: 1.2; }

/* ---------- Page-specific rules from assets/index.html ---------- */
/* Keep these at the end so they override base styles when needed */
*, *:before, *:after { box-sizing: border-box; }
:root{--dvh:1vh}
body{font-family:sans-serif;max-width:1100px;margin:20px auto;padding:20px;background:#1a1a1a;color:#fff;padding-left:calc(20px + env(safe-area-inset-left));padding-right:calc(20px + env(safe-area-inset-right));padding-top:calc(20px + env(safe-area-inset-top));padding-bottom:calc(20px + env(safe-area-inset-bottom));min-height:calc(var(--dvh, 1vh) * 100)}
h1{color:#FF8C00}
h2{border-bottom:2px solid #FF8C00;padding-bottom:10px}
.card{background:#2a2a2a;padding:18px;margin:8px 0;border-radius:8px;display:flex;flex-direction:column;min-height:0}
/* Desktop-first: keep two columns so Settings & Profiles remain side-by-side; current status spans both columns. */
.cards-grid{ display:grid; grid-template-columns: repeat(2, minmax(170px,1fr)); grid-template-rows: auto 1fr; grid-gap:12px; align-items:stretch }
.cards-grid > .card:first-child, .cards-grid > .status-card { grid-column: 1 / -1 !important; grid-row: 1; width:100%; box-sizing:border-box }
.cards-grid > .card:nth-child(2){ grid-column: 1; grid-row: 2 }
.cards-grid > .card:nth-child(3){ grid-column: 2; grid-row: 2 }
/* Small screens: stack into single column to keep UI readable on narrow devices */
@media (max-width:560px) {
  .cards-grid{grid-template-columns:1fr !important; grid-template-rows:auto auto auto}
  /* Reset explicit child grid placement so cards flow vertically */
  .cards-grid > .card:nth-child(2), .cards-grid > .card:nth-child(3) { grid-column:auto !important; grid-row:auto !important }
}
.card-body{flex:1;display:flex;flex-direction:column;gap:8px;overflow:visible}
/* Do not force first card to span full width; allow it to occupy first column */
.value{font-size:1.6em;font-weight:bold;color:#FF8C00}
.label{color:#999;font-size:0.9em}
button{background:#FF8C00;color:#fff;border:none;padding:8px 12px;margin:5px;border-radius:4px;cursor:pointer;min-width:84px;text-align:center;display:inline-flex;align-items:center;justify-content:center}
button:hover{background:#e67e22}
/* Danger button (restart/shutdown) */
.btn-danger{background:#c0392b;color:#fff;border:1px solid rgba(0,0,0,0.2);}
.btn-danger:hover{background:#a93226}
/* Make restart button stand out and span full width */
#restartBtn{width:100%;display:block;box-sizing:border-box;padding:12px;margin:6px 0}
input{padding:8px;margin:5px;border:1px solid #555;background:#333;color:#fff;border-radius:4px;max-width:100%}
select{padding:8px;margin:5px;border:1px solid #555;background:#333;color:#fff;border-radius:4px;max-width:100%}
textarea{width:100%;max-width:100%;box-sizing:border-box;padding:8px;margin:5px;border:1px solid #555;background:#333;color:#fff;border-radius:4px;resize:vertical}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:6px 10px;font-size:0.9em;background:rgba(0,0,0,0.15);border-radius:6px;margin-bottom:12px;position:sticky;top:calc(env(safe-area-inset-top) + 6px);z-index:999}
.topbar a{color:#fff;text-decoration:none;font-weight:600}
.topbar .version{color:#ddd;font-size:0.85em}
@media (max-width:700px) {
  body{padding:12px;margin:8px}
  .card{padding:12px}
  /* Keep the topbar items inline on small screens (prevent Github + version from wrapping into two rows) */
  .topbar{font-size:0.85em;flex-direction:row;align-items:center;gap:6px;flex-wrap:nowrap;justify-content:space-between}
  /* Prevent the GitHub text and version from breaking into multiple lines */
  .topbar a, .topbar .version{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .topbar .version{align-self:center}
  input, textarea, button, select { width:100%; box-sizing:border-box; margin:6px 0; }
  .value{font-size:1.6em}
  /* Stack settings and make inputs readable on medium/small screens */
  .settings-grid{grid-template-columns:1fr}
  .setting-row{flex-direction:column;align-items:stretch}
  .setting-row label{min-width:auto;margin-bottom:6px}
  .setting-row input, .setting-row select{font-size:1.05rem;padding:10px}
  .setting-row button{width:100%;margin-top:6px;min-width:auto}
}
/* Layout for status and settings */
.status-grid{display:grid;grid-template-columns:1fr 1fr;grid-gap:8px;align-items:center}
.status-row{display:flex;justify-content:space-between;align-items:center;padding:4px 0}
.status-row .label{flex:1}
.status-row .value{flex:1;text-align:right}
/* settings rows are displayed line-by-line: one setting per row */
.settings-grid{display:grid;grid-template-columns:1fr;grid-gap:12px;align-items:center}
.setting-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.profiles-actions{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.profiles-row{display:flex;gap:8px;align-items:center}
.profiles-select{flex:1;min-width:170px}
.setting-row input, .setting-row select{flex:1; min-width:86px}
/* Ensure Excluded Types input grows but set button remains fixed width */
.setting-row.excluded{display:flex;align-items:center;gap:4px}
.setting-row.excluded input{flex:1 1 0; min-width:0; margin:4px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap}
.setting-row.excluded button{flex:0 1 140px; min-width:120px; margin:4px}
/* For small label-field combos reduce label min-width to give inputs more room */
.setting-row label{min-width:80px}
.card h2{margin-top:0}
.profiles-actions button{min-width:0;width:100%;padding:10px}
/* Make avg btn compact by default (desktop), grow on small screens via media query */
.setting-row.avg-row{display:flex;flex-direction:column;align-items:stretch}
.setting-row.avg-row #avgBtn{ width:100%; display:block; box-sizing:border-box; padding:12px; margin:6px 0 }
/* Ensure thermalZone select has a reasonable minimum width so it doesn't shrink and cause layout issues */
#thermalZoneSelect { min-width:91px }
/* Profiles input full width */
#pname{width:100%;box-sizing:border-box;padding:8px;margin:6px 0}
textarea#pcontent{min-height:160px}
.value.small{font-size:1rem}
.btn-enabled{background:#28a745}
.btn-enabled:hover{background:#218838}
.setting-row label{margin-right:8px;min-width:80px;color:#ddd}
  /* Make profiles card body expand naturally instead of creating an inner scrollbar */
.profiles-card .card-body{overflow:visible}
  /* Limit the profile content area height to avoid overly large expansion */
.profiles-card textarea#pcontent{min-height:160px;max-height:40vh;overflow:auto}
/* Anchor restart grid to bottom of the containing card using flex auto margin */
.restart-grid{margin-top:auto}
/* Toast styling moved here instead of inline style */
#toast{position:fixed; top:20px; right:20px; padding:12px 16px; border-radius:6px; background:#333; border:1px solid #555; color:#fff; box-shadow:0 4px 12px rgba(0,0,0,0.3); z-index:10000; display:none; font-weight:bold}
/* hr inside cards: subtle orange divider matching theme */
.card hr{border:0; height:1px; background:rgba(255,140,0,0.12); margin:12px 0}
.card hr.light{background:rgba(255,255,255,0.06)}
/* Modal for confirmations */
.modal{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;z-index:9999}
/* Ensure confirm modal overlay is above other modals (skins modal) */
#confirmModal{z-index:99999}
.modal.hidden{display:none}
.modal-overlay{position:absolute;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,0.6)}
.modal-content{position:relative;z-index:2;background:rgba(34,34,34,0.96);padding:18px;border-radius:8px;min-width:320px;max-width:90%;box-shadow:0 8px 24px rgba(0,0,0,0.5);} 
.modal-message{color:#fff;margin-bottom:12px;font-size:1rem}

/* Modal form elements should match the site look */
.modal-content input, .modal-content select, .modal-content textarea { background:#333; color:#fff; border:1px solid #555; padding:8px; border-radius:6px; }
.modal-content .profiles-select { background:#333; color:#fff; border:1px solid #555; padding:8px 12px; height:40px; }
.modal-content label{color:#ddd;min-width:0;margin-bottom:4px}

/* Excludes modal unified card styling */
/* Scroll container: reserves space for scrollbars and keeps them inside the rounded container */
.excludes-scroll { max-height:60vh; overflow:auto; padding:8px; border-radius:8px; scrollbar-gutter: stable; padding-right:12px; background: linear-gradient(180deg, rgba(255,255,255,0.002), rgba(255,255,255,0.000)); }

/* Group cards inside the scroll area */
.exclude-group { margin-top:8px; padding:10px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); overflow:visible }
.exclude-group-header { font-weight:600; color:#fff; margin-bottom:6px; display:flex; align-items:center; gap:8px }
.exclude-group-id { color:#9aa; font-weight:400; font-size:0.9em }
.exclude-item { padding:6px 4px; border-radius:6px; display:flex; align-items:center; gap:10px }
.exclude-item label { width:100%; display:flex; align-items:center; gap:10px; color:#ddd }
.exclude-item:hover { background: rgba(255,255,255,0.01); }
.exclude-item .exclude-item-label { font-weight:500; color:#fff }
.exclude-item .exclude-item-meta { margin-left:auto; color:#9aa; font-size:0.9em }
.exclude-item input[type="checkbox"] { width:18px; height:18px }

/* Slightly tighten spacing for small screens */
@media (max-width:700px) { .exclude-group { padding:8px } .exclude-item { padding:8px 4px } }

/* Fix layout between ~560px and 480px where .setting-row button rules earlier can force full-width buttons
   Ensure the AVG button can flex and the gear button keeps a fixed small width so it doesn't force shrinking */
@media (max-width:560px) and (min-width:480px) {
  .setting-row.avg-row .avg-controls { display:flex; gap:8px; align-items:center; }
  /* undo the generic .setting-row button width:100% for this specific row */
  .setting-row.avg-row .avg-controls button { width: auto; }
  .setting-row.avg-row .avg-controls #avgBtn { flex:1 1 auto; min-width:0; }
  .setting-row.avg-row .avg-controls .sensor-btn { flex:0 0 44px; width:44px; height:44px; }
}

/* Sensor controls: make Source and Device selects equal width and responsive */
.sensor-controls { display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap:12px; align-items:end; }
.sensor-controls .field { display:flex; flex-direction:column; gap:6px; min-width:0; }
.sensor-controls .field .profiles-select { width:100%; box-sizing:border-box; max-width:46ch; }

/* Allow selects to fill the available space between 480px and 560px (prevent fixed ch-based max from constraining) */
@media (max-width:560px) and (min-width:480px) {
  .sensor-controls .field .profiles-select { max-width:100%; }
}
@media (max-width:950px) { .sensor-controls { grid-template-columns: 1fr; } }

/* Avg controls: make gear button fixed and prevent it from shrinking the avg button */
.avg-controls{ display:flex; gap:8px; align-items:center }
.avg-controls #avgBtn{ flex:1; min-width:0 }
.avg-controls .sensor-btn{ flex:0 0 48px; width:48px; height:48px; padding:0; display:inline-flex; align-items:center; justify-content:center; border-radius:6px; }
@media (max-width:700px) { .avg-controls .sensor-btn{ flex:0 0 44px; width:44px; height:44px } }
.modal-content .btn-secondary, .modal-content .btn-enabled { height:40px; padding:8px 12px }

/* Sensor value truncation in status card: hide start (show tail) using RTL container */
/* Sensor value default behavior: show tail with leading ellipsis when in compact rows */
/* Ensure inline sensor (moved into .label) uses the same visual style as .value and aligns to the right */
.status-row .label { display:flex; align-items:center; gap:8px; }
.status-row .label #sensor { font-size:1.6em; font-weight:bold; color:#FF8C00; margin-left:auto; text-align:right; flex:0 1 48ch; max-width:48ch; overflow:hidden; white-space:nowrap; display:inline-block; vertical-align:middle; direction:rtl; position:relative; }
#sensor > span { direction:ltr; display:inline-block; }
#sensor[title] { cursor:help; }
#sensor.truncated::before { content:'...'; position:relative; left:0; color:#bbb; margin-right:6px; transform:translateX(-4px); }

/* Sensor full-row behavior: show full path and allow wrapping */
.status-row.sensor-row { display:flex; flex-direction:column; align-items:flex-start; gap:6px }
.status-row.sensor-row .value { width:100%; text-align:left; white-space:normal; overflow:visible; direction:ltr }
.status-row.sensor-row .value > span { display:inline; word-break:break-all; }

/* Make modal overlay slightly more prominent on small screens */
@media (max-width:700px) { .modal-overlay { background: rgba(0,0,0,0.72); } }
.modal-actions{display:flex;gap:8px;justify-content:flex-end}
.modal-actions button{min-width:120px}
/* Make select more compact on smaller mobile */
@media (max-width:700px) {
  /* Stack settings earlier: make all elements in settings stack vertically */
  .settings-grid{grid-template-columns:1fr}
  .setting-row{flex-direction:column;align-items:stretch}
  .setting-row input, .setting-row select{font-size:1.05rem;padding:10px}
  .setting-row button{width:100%;margin-top:6px;min-width:auto}
}
@media (max-width:550px) {
  /* Make cards single-column when viewport becomes narrow */
  .cards-grid{grid-template-columns:1fr}
}
@media (max-width:560px) {
  .settings-grid{grid-template-columns:1fr}
  .status-grid{grid-template-columns:1fr}
  .card { margin:8px 0; }
  select { font-size: 0.95rem; }
  /* Ensure sensor display wraps and allows word-break at small widths */
  #sensor { direction: ltr; white-space: normal; word-break: break-word; max-width:100%; overflow:visible }
  #sensor > span { white-space: normal }
}

/* Floating Action Button (FAB) for skins */
.fab{position:fixed;right:20px;bottom:20px;background:#FF8C00;color:#fff;border:none;padding:12px 14px;border-radius:999px;box-shadow:0 8px 20px rgba(0,0,0,0.4);z-index:1200;cursor:pointer;font-weight:700}
.fab:hover{transform:translateY(-2px);}

/* HWMon summary and small sensor button styling */

.sensor-btn{padding:6px;width:34px;height:34px;border-radius:4px;background:#333;color:#fff;border:1px solid #444;cursor:pointer}
.sensor-btn:hover{background:#444}
.avg-controls{display:flex;gap:6px;align-items:center}
.modal-actions-right{display:flex;gap:8px;justify-content:flex-end}
.skin-card img{display:block}
.skin-card{display:flex;flex-direction:column}
.skin-card .skin-actions{display:flex;justify-content:flex-end;gap:6px;align-items:center;flex-wrap:wrap}
.skin-card .skin-actions button{flex:0 0 auto}
.skin-card .skin-actions .btn-danger{padding:6px 8px;font-size:0.9em}
.skin-action-btn{padding:6px 8px;border-radius:6px;background:#FF8C00;color:#fff;border:none;cursor:pointer;min-width:70px}
.skin-action-btn.active{background:#c0392b}
.skin-action-btn:hover{opacity:0.95}
.skin-card .skin-name{font-weight:700;margin-bottom:6px}
.skin-card .skin-allow{font-size:0.85rem;color:#aaa;margin-right:8px}
@media (max-width:700px) {
  .fab{position:static;right:auto;bottom:auto;width:100%;border-radius:6px;margin-top:12px;display:block}
}
/* Also treat viewports <=950px as mobile for the skins FAB so it collapses earlier */
@media (max-width:950px) {
  .fab{position:static;right:auto;bottom:auto;width:100%;border-radius:6px;margin-top:12px;display:block}
}
.modal-content .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.modal-content #skinsContainer{display:flex;gap:10px;flex-wrap:wrap;max-height:60vh;overflow:auto;padding:6px}
.modal-content #skinsContainer .skin-card{width:220px;background:#111;border:1px solid #333;border-radius:8px;padding:8px;box-sizing:border-box}
.modal-content #skinsContainer img{width:100%;max-height:120px;object-fit:cover;border-radius:4px}
.skins-info{padding:6px;color:#ddd;font-size:0.95rem}
.btn-secondary{background:#333;color:#fff;border:0;padding:6px 10px;border-radius:6px;cursor:pointer}
.btn-secondary:hover{background:#444}
.modal-header .modal-actions{display:flex;gap:8px;align-items:center}
/* Header action group for skins modal */
.modal-header{display:flex;flex-direction:row;align-items:center;gap:8px;margin-bottom:6px}
.modal-row-actions{display:flex;justify-content:space-between;align-items:center;gap:12px}
.header-left{display:flex;align-items:center;gap:8px}
.header-right{display:flex;align-items:center;gap:8px}
.btn-icon { display:inline-flex; align-items:center; gap:6px; }
.btn-icon svg { margin-right: 6px; width: 16px; height: 16px; }
.btn-icon span { display: inline-block; }
.btn-close{background:#c0392b;color:#fff;border:none;width:34px;height:34px;min-width:0;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:0.95rem;line-height:1;z-index:1000;padding:0}
.btn-close:hover{opacity:0.95}
.modal-content{position:relative}
/* Place close button inside the header so it doesn't overlap the title */
.modal-header .btn-close { margin-left: auto; position: static; width:34px; height:34px; font-size:0.95rem; align-self:center; }
.install-group{display:flex;align-items:center;gap:6px}
.upload-progress{display:none;width:180px;margin-left:8px;height:12px;border-radius:6px}
.install-activate{display:flex;align-items:center;gap:4px;font-size:0.85em;color:#ccc}
.hidden-file-input{display:none}
.modal-actions-header{display:flex;gap:8px;align-items:center}

/* (Reverted) The previous @media (max-width:1100px) rules were removed per user request.
   Keep the rest of the responsive rules as-is. */
